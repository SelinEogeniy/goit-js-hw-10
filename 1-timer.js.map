{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  input: document.querySelector('#datetime-picker'),\n  startBtn: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nconst timer = {\n  deadline: null,\n  intervalId: null,\n  isActive: false,\n  refs,\n\n  init() {\n    this.refs.startBtn.disabled = true;\n    flatpickr(this.refs.input, {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose: selectedDates => {\n        const selected = selectedDates[0];\n\n        if (selected <= new Date()) {\n          this.refs.startBtn.disabled = true;\n          iziToast.error({\n            title: 'Помилка',\n            message: 'Please choose a date in the future',\n          });\n        } else {\n          this.deadline = selected;\n          this.refs.startBtn.disabled = false;\n        }\n      },\n    });\n\n    this.refs.startBtn.addEventListener('click', () => this.start());\n  },\n\n  start() {\n    if (this.isActive || !this.deadline) return;\n\n    this.isActive = true;\n    this.refs.startBtn.disabled = true;\n    this.refs.input.disabled = true;\n\n    this.intervalId = setInterval(() => {\n      const diff = this.deadline - Date.now();\n\n      if (diff <= 0) {\n        this.stop();\n        this.updateInterface(0, 0, 0, 0);\n        this.refs.input.disabled = false;\n        return;\n      }\n\n      const { days, hours, minutes, seconds } = this.getTimeComponents(diff);\n      this.updateInterface(days, hours, minutes, seconds);\n    }, 1000);\n  },\n\n  stop() {\n    clearInterval(this.intervalId);\n    this.isActive = false;\n  },\n\n  getTimeComponents(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor((ms % hour) / minute);\n    const seconds = Math.floor((ms % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  },\n\n  updateInterface(days, hours, minutes, seconds) {\n    this.refs.days.textContent = this.pad(days);\n    this.refs.hours.textContent = this.pad(hours);\n    this.refs.minutes.textContent = this.pad(minutes);\n    this.refs.seconds.textContent = this.pad(seconds);\n  },\n\n  pad(value) {\n    return String(value).padStart(2, '0');\n  },\n};\n\ntimer.init();\n"],"names":["refs","timer","flatpickr","selectedDates","selected","iziToast","diff","days","hours","minutes","seconds","ms","value"],"mappings":"2GAKA,MAAMA,EAAO,CACX,MAAO,SAAS,cAAc,kBAAkB,EAChD,SAAU,SAAS,cAAc,cAAc,EAC/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEMC,EAAQ,CACZ,SAAU,KACV,WAAY,KACZ,SAAU,GACV,KAAAD,EAEA,MAAO,CACL,KAAK,KAAK,SAAS,SAAW,GAC9BE,EAAU,KAAK,KAAK,MAAO,CACzB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASC,GAAiB,CACxB,MAAMC,EAAWD,EAAc,CAAC,EAE5BC,GAAY,IAAI,MAClB,KAAK,KAAK,SAAS,SAAW,GAC9BC,EAAS,MAAM,CACb,MAAO,UACP,QAAS,oCACrB,CAAW,IAED,KAAK,SAAWD,EAChB,KAAK,KAAK,SAAS,SAAW,GAEjC,CACP,CAAK,EAED,KAAK,KAAK,SAAS,iBAAiB,QAAS,IAAM,KAAK,MAAK,CAAE,CAChE,EAED,OAAQ,CACF,KAAK,UAAY,CAAC,KAAK,WAE3B,KAAK,SAAW,GAChB,KAAK,KAAK,SAAS,SAAW,GAC9B,KAAK,KAAK,MAAM,SAAW,GAE3B,KAAK,WAAa,YAAY,IAAM,CAClC,MAAME,EAAO,KAAK,SAAW,KAAK,IAAG,EAErC,GAAIA,GAAQ,EAAG,CACb,KAAK,KAAI,EACT,KAAK,gBAAgB,EAAG,EAAG,EAAG,CAAC,EAC/B,KAAK,KAAK,MAAM,SAAW,GAC3B,MACD,CAED,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAK,KAAK,kBAAkBJ,CAAI,EACrE,KAAK,gBAAgBC,EAAMC,EAAOC,EAASC,CAAO,CACnD,EAAE,GAAI,EACR,EAED,MAAO,CACL,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,EACjB,EAED,kBAAkBC,EAAI,CAMpB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAC1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EACpCF,EAAU,KAAK,MAAOE,EAAK,KAAQ,GAAM,EACzCD,EAAU,KAAK,MAAOC,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,EAED,gBAAgBH,EAAMC,EAAOC,EAASC,EAAS,CAC7C,KAAK,KAAK,KAAK,YAAc,KAAK,IAAIH,CAAI,EAC1C,KAAK,KAAK,MAAM,YAAc,KAAK,IAAIC,CAAK,EAC5C,KAAK,KAAK,QAAQ,YAAc,KAAK,IAAIC,CAAO,EAChD,KAAK,KAAK,QAAQ,YAAc,KAAK,IAAIC,CAAO,CACjD,EAED,IAAIE,EAAO,CACT,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,EAEAX,EAAM,KAAM"}